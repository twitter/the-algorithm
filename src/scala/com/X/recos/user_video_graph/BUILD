scala_library(
    name = "user-video-graph",
    sources = ["*.scala"],
    tags = [
        "bazel-compatible",
        "bazel-only",
    ],
    dependencies = [
        "3rdparty/jvm/cascading:cascading-local",
        "3rdparty/jvm/com/backtype:dfs-datastores",
        "3rdparty/jvm/com/fasterxml/jackson/module:jackson-module-scala",
        "3rdparty/jvm/com/google/inject:guice",
        "3rdparty/jvm/com/netflix/curator:curator-framework",
        "3rdparty/jvm/com/X/graphjet",
        "3rdparty/jvm/io/netty:netty4-tcnative-boringssl-static",
        "3rdparty/jvm/it/unimi/dsi:fastutil",
        "3rdparty/jvm/org/apache/hadoop:hadoop-client-default",
        "3rdparty/jvm/org/apache/kafka:rosette-kafka",
        "3rdparty/jvm/org/apache/thrift:libthrift",
        "abdecider/src/main/scala",
        "decider/src/main/scala",
        "finagle-internal/mtls/src/main/scala/com/X/finagle/mtls/authentication",
        "finagle-internal/mtls/src/main/scala/com/X/finagle/mtls/server",
        "finagle/finagle-core/src/main",
        "finagle/finagle-http/src/main/scala",
        "finagle/finagle-memcached/src/main/scala",
        "finagle/finagle-stats/src/main/scala",
        "finagle/finagle-thriftmux/src/main/scala",
        "frigate/frigate-common/src/main/scala/com/X/frigate/common/util",
        "scrooge/scrooge-core/src/main/scala",
        "servo/repo/src/main/scala",
        "servo/request/src/main/scala",
        "servo/util/src/main/scala",
        "src/resources/com/X/recos:decider",
        "src/scala/com/X/recos/decider",
        "src/scala/com/X/recos/graph_common",
        "src/scala/com/X/recos/hose/common",
        "src/scala/com/X/recos/model:recos-model",
        "src/scala/com/X/recos/serviceapi",
        "src/scala/com/X/recos/user_video_graph/relatedTweetHandlers",
        "src/scala/com/X/recos/user_video_graph/store",
        "src/scala/com/X/recos/util:recos-util",
        "src/scala/com/X/simclusters_v2/common",
        "src/thrift/com/X/recos:recos-common-scala",
        "src/thrift/com/X/recos:recos-internal-scala",
        "src/thrift/com/X/recos/user_video_graph:user_video_graph-scala",
        "thrift-web-forms/src/main/scala/com/X/thriftwebforms",
        "thrift-web-forms/src/main/scala/com/X/thriftwebforms/model",
        "X-server-internal/src/main/scala",
        "X-server/server/src/main/scala",
        "X-server/slf4j-jdk14/src/main/scala/com/X/server/logging",
        "util/util-app/src/main/scala",
        "util/util-hashing/src/main/scala",
        "util/util-stats/src/main/scala",
    ],
)

jvm_binary(
    name = "bin",
    basename = "user-video-graph-server",
    main = "com.X.recos.user_video_graph.Main",
    runtime_platform = "java11",
    tags = ["known-to-fail-jira:SD-20771"],
    dependencies = [
        ":user-video-graph",
        "3rdparty/jvm/org/slf4j:slf4j-jdk14",
        "X-server/slf4j-jdk14/src/main/scala",
    ],
)
