scala_library(
    name = "user-tweet-graph",
    sources = ["*.scala"],
    tags = ["bazel-compatible"],
    dependencies = [
        "3rdparty/jvm/cascading:cascading-local",
        "3rdparty/jvm/com/backtype:dfs-datastores",
        "3rdparty/jvm/com/fasterxml/jackson/module:jackson-module-scala",
        "3rdparty/jvm/com/google/inject:guice",
        "3rdparty/jvm/com/netflix/curator:curator-framework",
        "3rdparty/jvm/com/twitter/graphjet",
        "3rdparty/jvm/io/netty:netty4-tcnative-boringssl-static",
        "3rdparty/jvm/it/unimi/dsi:fastutil",
        "3rdparty/jvm/org/apache/hadoop:hadoop-client-default",
        "3rdparty/jvm/org/apache/kafka:rosette-kafka",
        "3rdparty/jvm/org/apache/thrift:libthrift",
        "abdecider/src/main/scala",
        "decider/src/main/scala",
        "finagle-internal/mtls/src/main/scala/com/twitter/finagle/mtls/authentication",
        "finagle-internal/mtls/src/main/scala/com/twitter/finagle/mtls/server",
        "finagle/finagle-core/src/main",
        "finagle/finagle-http/src/main/scala",
        "finagle/finagle-memcached/src/main/scala",
        "finagle/finagle-stats/src/main/scala",
        "finagle/finagle-thriftmux/src/main/scala",
        "frigate/frigate-common/src/main/scala/com/twitter/frigate/common/util",
        "scrooge/scrooge-core/src/main/scala",
        "servo/repo/src/main/scala",
        "servo/request/src/main/scala",
        "servo/util/src/main/scala",
        "src/resources/com/twitter/recos:decider",
        "src/scala/com/twitter/recos/decider",
        "src/scala/com/twitter/recos/graph_common",
        "src/scala/com/twitter/recos/hose/common",
        "src/scala/com/twitter/recos/model:recos-model",
        "src/scala/com/twitter/recos/serviceapi",
        "src/scala/com/twitter/recos/user_tweet_graph/relatedTweetHandlers",
        "src/scala/com/twitter/recos/util:recos-util",
        "src/scala/com/twitter/simclusters_v2/common",
        "src/thrift/com/twitter/recos:recos-common-scala",
        "src/thrift/com/twitter/recos:recos-internal-scala",
        "src/thrift/com/twitter/recos/user_tweet_graph:user_tweet_graph-scala",
        "thrift-web-forms/src/main/scala/com/twitter/thriftwebforms",
        "thrift-web-forms/src/main/scala/com/twitter/thriftwebforms/model",
        "twitter-server-internal/src/main/scala",
        "twitter-server/server/src/main/scala",
        "twitter-server/slf4j-jdk14/src/main/scala/com/twitter/server/logging",
        "util/util-app/src/main/scala",
        "util/util-hashing/src/main/scala",
        "util/util-logging/src/main/scala",
        "util/util-stats/src/main/scala",
    ],
)

jvm_binary(
    name = "bin",
    basename = "user-tweet-graph-server",
    main = "com.twitter.recos.user_tweet_graph.Main",
    runtime_platform = "java11",
    tags = ["known-to-fail-jira:SD-20771"],
    dependencies = [
        ":user-tweet-graph",
        "3rdparty/jvm/org/slf4j:slf4j-jdk14",
        "twitter-server/slf4j-jdk14/src/main/scala",
    ],
)
