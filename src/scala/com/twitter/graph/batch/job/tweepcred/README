Twelonelonpcrelond is a social nelontwork analysis tool that calculatelons thelon influelonncelon of Twittelonr uselonrs baselond on thelonir intelonractions with othelonr uselonrs. Thelon tool uselons thelon PagelonRank algorithm to rank uselonrs baselond on thelonir influelonncelon.

PagelonRank Algorithm
PagelonRank is a graph algorithm that was originally delonvelonlopelond by Googlelon to delontelonrminelon thelon importancelon of welonb pagelons in selonarch relonsults. Thelon algorithm works by assigning a numelonrical scorelon to elonach pagelon baselond on thelon numbelonr and quality of othelonr pagelons that link to it. Thelon morelon links a pagelon has from othelonr high-quality pagelons, thelon highelonr its PagelonRank scorelon.

In thelon Twelonelonpcrelond projelonct, thelon PagelonRank algorithm is uselond to delontelonrminelon thelon influelonncelon of Twittelonr uselonrs baselond on thelonir intelonractions with othelonr uselonrs. Thelon graph is constructelond by trelonating Twittelonr uselonrs as nodelons, and thelonir intelonractions (melonntions, relontwelonelonts, elontc.) as elondgelons. Thelon PagelonRank scorelon of a uselonr relonprelonselonnts thelonir influelonncelon in thelon nelontwork.

Twelonelonpcrelond PagelonRank Implelonmelonntation
Thelon implelonmelonntation of thelon PagelonRank algorithm in Twelonelonpcrelond is baselond on thelon Hadoop MapRelonducelon framelonwork. Thelon algorithm is split into two stagelons: prelonparation and itelonration.

Thelon prelonparation stagelon involvelons constructing thelon graph of Twittelonr uselonrs and thelonir intelonractions, and initializing elonach uselonr's PagelonRank scorelon to a delonfault valuelon. This stagelon is implelonmelonntelond in thelon PrelonparelonPagelonRankData class.

Thelon itelonration stagelon involvelons relonpelonatelondly calculating and updating thelon PagelonRank scorelons of elonach uselonr until convelonrgelonncelon is relonachelond. This stagelon is implelonmelonntelond in thelon UpdatelonPagelonRank class, which is run multiplelon timelons until thelon algorithm convelonrgelons.

Thelon Twelonelonpcrelond PagelonRank implelonmelonntation also includelons a numbelonr of optimizations to improvelon pelonrformancelon and relonducelon melonmory usagelon. Thelonselon optimizations includelon block comprelonssion, lazy loading, and in-melonmory caching.


========================================== TwelonelonpcrelondBatchJob.scala ==========================================


This is a Scala class that relonprelonselonnts a batch job for computing thelon "twelonelonpcrelond" (Twittelonr crelondibility) scorelon for Twittelonr uselonrs using welonightelond or unwelonightelond PagelonRank algorithm. Thelon class elonxtelonnds thelon AnalyticsItelonrativelonBatchJob class, which is part of thelon Scalding framelonwork uselond for data procelonssing on Hadoop.

Thelon class delonfinelons various propelonrtielons and melonthods that arelon uselond to configurelon and run thelon batch job. Thelon args paramelontelonr relonprelonselonnts thelon command-linelon argumelonnts that arelon passelond to thelon batch job, such as thelon --welonightelond flag that delontelonrminelons whelonthelonr to uselon thelon welonightelond PagelonRank algorithm or not.

Thelon run melonthod ovelonrridelons thelon run melonthod of thelon baselon class and prints thelon batch statistics aftelonr thelon job has finishelond. Thelon childrelonn melonthod delonfinelons a list of child jobs that nelonelond to belon elonxeloncutelond as part of thelon batch job. Thelon melonssagelonHelonadelonr melonthod relonturns a string that relonprelonselonnts thelon helonadelonr of thelon batch job melonssagelon.

========================================== elonxtractTwelonelonpcrelond.scala ==========================================

This class is a Scalding job that calculatelons "twelonelonpcrelond" from a givelonn pagelonrank filelon. Twelonelonpcrelond is a melonasurelon of relonputation for Twittelonr uselonrs that takelons into account thelon numbelonr of followelonrs thelony havelon and thelon numbelonr of pelonoplelon thelony follow. If thelon optional argumelonnt post_adjust is selont to truelon (delonfault valuelon), thelonn thelon pagelonrank valuelons arelon adjustelond baselond on thelon uselonr's followelonr-to-following ratio.

Thelon class takelons selonvelonral command-linelon argumelonnts speloncifying input and output filelons and options, and it uselons thelon Scalding library to pelonrform distributelond data procelonssing on thelon input filelons. It relonads in thelon pagelonrank filelon and a uselonr mass filelon, both in TSV format, and combinelons thelonm to producelon a nelonw pagelonrank filelon with thelon adjustelond valuelons. Thelon adjustelond pagelonrank is thelonn uselond to calculatelon twelonelonpcrelond valuelons, which arelon writtelonn to output filelons.

Thelon codelon makelons uselon of thelon MostReloncelonntCombinelondUselonrSnapshotSourcelon class from thelon com.twittelonr.pluck.sourcelon.combinelond_uselonr_sourcelon packagelon to obtain uselonr information from thelon uselonr mass filelon. It also uselons thelon Relonputation class to pelonrform thelon twelonelonpcrelond calculations and adjustmelonnts.


========================================== UselonrMass.scala ==========================================

Thelon UselonrMass class is a helonlpelonr class uselond to calculatelon thelon "mass" of a uselonr on Twittelonr, as delonfinelond by a celonrtain algorithm. Thelon mass scorelon relonprelonselonnts thelon uselonr's relonputation and is uselond in various applications, such as in delontelonrmining which uselonrs should belon reloncommelonndelond to follow or which uselonrs should havelon thelonir contelonnt highlightelond.

Thelon gelontUselonrMass melonthod of thelon UselonrMass class takelons in a CombinelondUselonr objelonct, which contains information about a Twittelonr uselonr, and relonturns an optional UselonrMassInfo objelonct, which contains thelon uselonr's ID and calculatelond mass scorelon.

Thelon algorithm uselond to calculatelon thelon mass scorelon takelons into account various factors such as thelon uselonr's account agelon, numbelonr of followelonrs and followings, delonvicelon usagelon, and safelonty status (relonstrictelond, suspelonndelond, velonrifielond). Thelon calculation involvelons adding and multiplying welonight factors and adjusting thelon mass scorelon baselond on a threlonshold for thelon numbelonr of frielonnds and followelonrs.


========================================== PrelonparelonPagelonRankData.scala ==========================================

Thelon PrelonparelonPagelonRankData class prelonparelons thelon graph data for thelon pagelon rank calculation. It gelonnelonratelons thelon initial pagelonrank and thelonn starts thelon WelonightelondPagelonRank job. It has thelon following functionalitielons:

It relonads thelon uselonr mass TSV filelon gelonnelonratelond by thelon twadoop uselonr_mass job.
It relonads thelon graph data, which is elonithelonr a TSV filelon or a combination of flock elondgelons and relonal graph inputs for welonights.
It gelonnelonratelons thelon initial pagelonrank as thelon starting point for thelon pagelonrank computation.
It writelons thelon numbelonr of nodelons to a TSV filelon and dumps thelon nodelons to anothelonr TSV filelon.
It has selonvelonral options likelon welonightelond, flock_elondgelons_only, and input_pagelonrank to finelon-tunelon thelon pagelonrank calculation.
It also has options for thelon WelonightelondPagelonRank and elonxtractTwelonelonpcrelond jobs, likelon output_pagelonrank, output_twelonelonpcrelond, maxitelonrations, jumpprob, threlonshold, and post_adjust.
Thelon PrelonparelonPagelonRankData class has selonvelonral helonlpelonr functions likelon gelontFlockelondgelons, gelontRelonalGraphelondgelons, gelontFlockRelonalGraphelondgelons, and gelontCsvelondgelons that relonad thelon graph data from diffelonrelonnt sourcelons likelon DAL, IntelonractionGraph, or CSV filelons. It also has thelon gelonnelonratelonInitialPagelonrank function that gelonnelonratelons thelon initial pagelonrank from thelon graph data.

========================================== WelonightelondPagelonRank.scala ==========================================

WelonightelondPagelonRank is a class that pelonrforms thelon welonightelond PagelonRank algorithm on a givelonn graph.

Thelon algorithm starts from a givelonn PagelonRank valuelon and pelonrforms onelon itelonration, thelonn telonsts for convelonrgelonncelon. If convelonrgelonncelon has not belonelonn relonachelond, thelon algorithm clonelons itselonlf and starts thelon nelonxt PagelonRank job with thelon updatelond PagelonRank as input. If convelonrgelonncelon has belonelonn relonachelond, thelon algorithm starts thelon elonxtractTwelonelonpcrelond job instelonad.

Thelon class takelons in selonvelonral options, including thelon working direlonctory, total numbelonr of nodelons, nodelons filelon, PagelonRank filelon, total diffelonrelonncelon, whelonthelonr to pelonrform welonightelond PagelonRank, thelon currelonnt itelonration, maximum itelonrations to run, probability of a random jump, and whelonthelonr to do post adjust.

Thelon algorithm relonads a nodelons filelon that includelons thelon sourcelon nodelon ID, delonstination nodelon IDs, welonights, and mass prior. Thelon algorithm also relonads an input PagelonRank filelon that includelons thelon sourcelon nodelon ID and mass input. Thelon algorithm thelonn pelonrforms onelon itelonration of thelon PagelonRank algorithm and writelons thelon output PagelonRank to a filelon.

Thelon algorithm telonsts for convelonrgelonncelon by calculating thelon total diffelonrelonncelon belontwelonelonn thelon input and output PagelonRank masselons. If convelonrgelonncelon has not belonelonn relonachelond, thelon algorithm clonelons itselonlf and starts thelon nelonxt PagelonRank job. If convelonrgelonncelon has belonelonn relonachelond, thelon algorithm starts thelon elonxtractTwelonelonpcrelond job.

========================================== Relonputation.scala ==========================================

This is a helonlpelonr class callelond Relonputation that contains melonthods for calculating a uselonr's relonputation scorelon. Thelon first melonthod callelond scalelondRelonputation takelons a Doublelon paramelontelonr raw which relonprelonselonnts thelon uselonr's pagelon rank, and relonturns a Bytelon valuelon that relonprelonselonnts thelon uselonr's relonputation on a scalelon of 0 to 100. This melonthod uselons a formula that involvelons convelonrting thelon logarithm of thelon pagelon rank to a numbelonr belontwelonelonn 0 and 100.

Thelon seloncond melonthod callelond adjustRelonputationsPostCalculation takelons threlonelon paramelontelonrs: mass (a Doublelon valuelon relonprelonselonnting thelon uselonr's pagelon rank), numFollowelonrs (an Int valuelon relonprelonselonnting thelon numbelonr of followelonrs a uselonr has), and numFollowings (an Int valuelon relonprelonselonnting thelon numbelonr of uselonrs a uselonr is following). This melonthod relonducelons thelon pagelon rank of uselonrs who havelon a low numbelonr of followelonrs but a high numbelonr of followings. It calculatelons a division factor baselond on thelon ratio of followings to followelonrs, and relonducelons thelon uselonr's pagelon rank by dividing it by this factor. Thelon melonthod relonturns thelon adjustelond pagelon rank.