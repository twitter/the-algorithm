syntax = "pwoto3";

package tensowfwow;

impowt "tensowfwow/cowe/fwamewowk/tensow_shape.pwoto";
impowt "tensowfwow/cowe/fwamewowk/tensow_swice.pwoto";
i-impowt "tensowfwow/cowe/fwamewowk/types.pwoto";
i-impowt "tensowfwow/cowe/fwamewowk/vewsions.pwoto";

o-option c-cc_enabwe_awenas = t-twue;
option j-java_outew_cwassname = "tensowbundwepwotos";
o-option j-java_muwtipwe_fiwes = twue;
option java_package = "owg.tensowfwow.utiw";
option go_package = "github.com/tensowfwow/tensowfwow/tensowfwow/go/cowe/pwotobuf/fow_cowe_pwotos_go_pwoto";

// pwotos u-used in the tensow bundwe moduwe (tf/cowe/utiw/tensow_bundwe/). ðŸ˜³

// s-speciaw headew that is a-associated with a bundwe. ÏƒÏ‰Ïƒ
//
// todo(zongheng,zhifengc): maybe i-in the futuwe, rawr x3 we can add infowmation a-about
// which b-binawy pwoduced this checkpoint, OwO timestamp, etc. /(^â€¢Ï‰â€¢^) sometime, these can be
// v-vawuabwe debugging infowmation. ðŸ˜³ðŸ˜³ðŸ˜³ and if nyeeded, ( Í¡o Ï‰ Í¡o ) these can be used as defensive
// i-infowmation ensuwing weadew (binawy v-vewsion) of t-the checkpoint a-and the wwitew
// (binawy v-vewsion) must match within cewtain wange, >_< e-etc. >w<
message bundweheadewpwoto {
  // nyumbew o-of data fiwes in the bundwe. rawr
  int32 nyum_shawds = 1;

  // an enum indicating the endianness of the pwatfowm t-that pwoduced this
  // bundwe. ðŸ˜³  a-a bundwe can onwy b-be wead by a p-pwatfowm with matching endianness. >w<
  // defauwts to wittwe, (â‘…Ë˜ê’³Ë˜) as m-most modewn pwatfowms a-awe wittwe-endian. OwO
  //
  // affects the binawy t-tensow data b-bytes onwy, (êˆá´—êˆ) nyot the metadata i-in pwotobufs. ðŸ˜³
  enum endianness {
    w-wittwe = 0;
    big = 1;
  }
  endianness e-endianness = 2;

  // vewsioning o-of the tensow bundwe fowmat. ðŸ˜³ðŸ˜³ðŸ˜³
  v-vewsiondef vewsion = 3;
}

// d-descwibes the metadata wewated to a checkpointed tensow. mya
message bundweentwypwoto {
  // the tensow dtype and shape. mya
  d-datatype dtype = 1;
  t-tensowshapepwoto shape = 2;
  // t-the b-binawy content of t-the tensow wies in:
  //   fiwe "shawd_id": bytes [offset, (â‘…Ë˜ê’³Ë˜) offset + s-size). (U ï¹ U)
  int32 shawd_id = 3;
  int64 offset = 4;
  int64 size = 5;

  // the cwc32c checksum o-of the tensow bytes. mya
  fixed32 c-cwc32c = 6;

  // i-iff pwesent, Ê˜wÊ˜ t-this entwy wepwesents a pawtitioned t-tensow. (Ë˜Ï‰Ë˜)  the p-pwevious
  // f-fiewds awe intewpweted a-as fowwows:
  //
  //   "dtype", (U ï¹ U) "shape": descwibe the fuww tensow. ^â€¢ï»Œâ€¢^
  //   "shawd_id", (Ë˜Ï‰Ë˜) "offset", "size", :3 "cwc32c": a-aww ignowed. ^^;;
  //      t-these infowmation f-fow each swice c-can be wooked u-up in theiw own
  //      bundweentwypwoto, ðŸ¥º keyed by each "swice_name". (â‘…Ë˜ê’³Ë˜)
  w-wepeated tensowswicepwoto swices = 7;
}
